= render 'layouts/header'
.top-image
  = image_tag("room2.jpg", alt: "top-picture", class: "topimage", style:"width: 100%" )
.main
  .products.ranking
    %p.heading BEST
    .items-box
      %ul.bxslider
        - @products.each do |product|
          %figure.items-box__ranking
            = link_to product_path(product) do
              = image_tag product.image.to_s, class: "product-image"
              - if user_signed_in?
                - if current_user.favorites.find_by(user_id: current_user.id, product_id: product.id)
                  = link_to product_favorite_path(product_id: product.id, id: current_user.id),method: :DELETE, id: "favorite-button", val: product.id do
                    %span.fa.fa-heart.favorite-red-btn-index#remote-button
                    %span.facorite-count#remote-button
                      = Favorite.where(product_id: product.id).count
                - else
                  = link_to product_favorites_path(product_id: product.id),method: :POST, id: "favorite-button", val: product.id do
                    %span.fa.fa-heart.favorite-btn-index#remote-button
                    %span.facorite-count#remote-button
                      = Favorite.where(product_id: product.id).count
              - else
                #favorite-button
                  %span.fa.fa-heart.favorite-btn-index
                  %span.facorite-count
                    = Favorite.where(product_id: product.id).count
  .products.new-products
    %p.heading NEW
    .items-box
      - @products.each do |product|
        %section.items-box__contents
          %figure.items-box__photo
            = link_to product_path(product) do
              = image_tag product.image.to_s, class: "product-image"
              - if user_signed_in?
                - if current_user.favorites.find_by(user_id: current_user.id, product_id: product.id)
                  = link_to product_favorite_path(id: current_user.id, product_id: product.id), method: :DELETE, id: "favorite-button", val: product.id do
                    %span.fa.fa-heart.favorite-red-btn-index#remote-button
                    %span.facorite-count#remote-button
                      = Favorite.where(product_id: product.id).count
                - else
                  = link_to product_favorites_path(product_id: product.id),method: :POST, id: "favorite-button", val: product.id  do
                    %span.fa.fa-heart.favorite-btn-index#remote-button
                    %span.facorite-count#remote-button
                      = Favorite.where(product_id: product.id).count
              - else
                #favorite-button
                  %span.fa.fa-heart.favorite-btn-index
                  %span.facorite-count
                    = Favorite.where(product_id: product.id).count
          .items-box__body
            .items-box__name
              = product.title
            .items-box__num
              .items-box__price
                = "￥" + product.price.to_s
              %p.items-box__tax (税込)
      .view-all
