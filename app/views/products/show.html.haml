= render 'layouts/header'
.product-detail
  .product-detail__image
    = image_tag @product.image.to_s, class: "product-detail-image"
  .product-detail__body
    .product-category
      = link_to root_path, class:"product-category-link" do
        = "カテゴリー： " + @product.category.name
    .product-detail-title
      = @product.title
    .product-detail-num
      .product-detail-price
        = "￥" + @product.price.to_s
      %P.product-detail-tax (税込)
    .product-order
      / = button_to controller: 'card', action: 'buy_confirm', id: params[:id] do
      = button_to root_path,class: "product-order-button"  do
        %p{style: "color: white;"} カートに入れる
    .product-favorite
      - if user_signed_in?
        - if current_user.favorites.find_by(user_id: current_user.id, product_id: @product.id)
          = link_to product_favorite_path(id: current_user.id, product_id: @product.id), method: :DELETE, id: "details-favorite-button" do
            %span.fa.fa-heart.favorite-red-btn-index#remote-button
            %span.facorite-count#remote-button
              = Favorite.where(product_id: @product.id).count
            %span.favorite-done
              お気に入りに登録済
        - else
          = link_to product_favorites_path(product_id: @product.id), method: :POST, id: "details-favorite-button" do
            %span.fa.fa-heart.favorite-btn-index#remote-button
            %span.facorite-count#remote-button
              = Favorite.where(product_id: @product.id).count
            %span.favorite-do
              お気に入りに登録する
      - else
        #favorite-button
          %span.fa.fa-heart.favorite-btn-index
          %span.facorite-count
            = Favorite.where(product_id: @product.id).count
    .product-detail-introduce
      = @product.introduce
